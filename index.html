<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz Interaktif - Aman GitHub Pages</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Confetti Library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body class="bg-gradient-to-br from-indigo-100 to-pink-100 min-h-screen flex items-center justify-center p-4">

  <div class="bg-white shadow-xl rounded-2xl p-6 w-full max-w-md">
    <h1 class="text-xl font-bold text-center mb-4" id="title">Quiz Sederhana</h1>

    <p class="text-center mb-4" id="question">What is 2 + 2?</p>

    <div class="grid grid-cols-2 gap-3" id="answers">
      <button class="ans-btn bg-blue-100 px-3 py-2 rounded-xl">3</button>
      <button class="ans-btn bg-blue-100 px-3 py-2 rounded-xl">4</button>
      <button class="ans-btn bg-blue-100 px-3 py-2 rounded-xl">5</button>
      <button class="ans-btn bg-blue-100 px-3 py-2 rounded-xl">6</button>
    </div>

    <div id="feedback" class="mt-4 text-center font-bold"></div>

    <div class="flex justify-between mt-6">
      <button id="readBtn" class="bg-green-500 text-white px-4 py-2 rounded-xl">ğŸ”Š Baca</button>
      <button id="langBtn" class="bg-purple-500 text-white px-4 py-2 rounded-xl">ğŸŒ EN/ID</button>
    </div>

    <audio id="bgMusic" loop>
      <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_6b48b0cbcb.mp3" type="audio/mpeg" />
    </audio>
  </div>

<script>
// ================== DATA ==================
const data = {
  en: {
    question: "What is 2 + 2?",
    answers: [3,4,5,6],
    correct: 4,
    correctText: "Correct! ğŸ‰",
    wrongText: "Try again ğŸ˜„"
  },
  id: {
    question: "Berapa 2 + 2?",
    answers: [3,4,5,6],
    correct: 4,
    correctText: "Benar! ğŸ‰",
    wrongText: "Coba lagi ğŸ˜„"
  }
};

let currentLang = 'en';

// ================== ELEMENTS ==================
const questionEl = document.getElementById('question');
const answersEl = document.getElementById('answers');
const feedbackEl = document.getElementById('feedback');
const langBtn = document.getElementById('langBtn');
const readBtn = document.getElementById('readBtn');
const music = document.getElementById('bgMusic');

// ================== RENDER ==================
function renderQuiz() {
  const q = data[currentLang];
  questionEl.textContent = q.question;
  answersEl.innerHTML = '';
  feedbackEl.textContent = '';

  q.answers.forEach(ans => {
    const btn = document.createElement('button');
    btn.textContent = ans;
    btn.className = 'ans-btn bg-blue-100 px-3 py-2 rounded-xl hover:bg-blue-200 transition';
    btn.onclick = () => checkAnswer(ans, btn);
    answersEl.appendChild(btn);
  });
}

// ================== CHECK ANSWER ==================
function checkAnswer(selected, btn){
  const q = data[currentLang];

  if(selected === q.correct){
    feedbackEl.textContent = q.correctText;
    feedbackEl.className = 'mt-4 text-center font-bold text-green-600 animate-bounce';
    
    // SAFE CONFETTI CALL
    try {
      if (typeof confetti === 'function') {
        confetti({ particleCount: 70, spread: 70, origin: { y: 0.8 } });
      }
    } catch (e) {
      console.warn('Confetti error:', e);
    }
  } else {
    feedbackEl.textContent = q.wrongText;
    feedbackEl.className = 'mt-4 text-center font-bold text-red-600';
  }
}

// ================== TEXT TO SPEECH ==================
function readContent(){
  const utter = new SpeechSynthesisUtterance(questionEl.textContent);
  const voices = speechSynthesis.getVoices() || [];

  utter.lang = currentLang === 'en' ? 'en-US' : 'id-ID';
  utter.voice = voices.find(v => v.lang.includes(utter.lang)) || voices[0] || null;

  speechSynthesis.speak(utter);
}

// ================== TOGGLE LANGUAGE ==================
langBtn.onclick = () => {
  currentLang = currentLang === 'en' ? 'id' : 'en';
  renderQuiz();
};

// ================== MUSIC AUTO ==================
document.body.addEventListener('click', () => {
  if (music.paused) {
    music.play().catch(() => console.warn('Autoplay diblokir browser'));
  }
}, { once: true });

readBtn.onclick = readContent;

// ================== INIT ==================
renderQuiz();
</script>

</body>
</html>
